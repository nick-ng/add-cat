import{z as k,E as w,u as x,F as b,G as m,H as s,I as S,D as E,x as A,J as h}from"./C6Bx9uxh.js";function V(e,f,a=f){var d=new WeakSet;k(e,"input",async l=>{var c=l?e.defaultValue:e.value;if(c=_(e)?u(c):c,a(c),s!==null&&d.add(s),await w(),c!==(c=f())){var v=e.selectionStart,n=e.selectionEnd;e.value=c??"",n!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(n,e.value.length))}}),(m&&e.defaultValue!==e.value||x(f)==null&&e.value)&&(a(_(e)?u(e.value):e.value),s!==null&&d.add(s)),b(()=>{var l=f();if(e===document.activeElement){var c=S??s;if(d.has(c))return}_(e)&&l===u(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const o=new Set;function q(e,f,a,d,l=d){var c=a.getAttribute("type")==="checkbox",v=e;let n=!1;if(f!==null)for(var y of f)v=v[y]??=[];v.push(a),k(a,"change",()=>{var r=a.__value;c&&(r=i(v,r,a.checked)),l(r)},()=>l(c?[]:null)),b(()=>{var r=d();if(m&&a.defaultChecked!==a.checked){n=!0;return}c?(r=r||[],a.checked=r.includes(a.__value)):a.checked=E(a.__value,r)}),A(()=>{var r=v.indexOf(a);r!==-1&&v.splice(r,1)}),o.has(v)||(o.add(v),h(()=>{v.sort((r,t)=>r.compareDocumentPosition(t)===4?-1:1),o.delete(v)})),h(()=>{if(n){var r;if(c)r=i(v,r,a.checked);else{var t=v.find(g=>g.checked);r=t?.__value}l(r)}})}function i(e,f,a){for(var d=new Set,l=0;l<e.length;l+=1)e[l].checked&&d.add(e[l].__value);return a||d.delete(f),Array.from(d)}function _(e){var f=e.type;return f==="number"||f==="range"}function u(e){return e===""?null:+e}export{V as a,q as b};
